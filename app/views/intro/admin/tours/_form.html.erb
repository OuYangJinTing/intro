<%= form_for @tour, url: url, html: { class: "intro-admin__form intro-admin__tour-form #{yield(:tour_form_class)}" } do |f| %>
  <% if @tour.errors.any? %>
    <div class='field error'>
      <div class='message list'>
        <% @tour.errors.full_messages.each do |message| %>
          <%= content_tag :div, message, class: 'item' %>
        <% end %>
      </div>
    </div>
  <% elsif flash.notice %>
    <div class='field info'>
      <%= content_tag :div, flash.notice, class: 'message' %>
    </div>
  <% end %>

  <div class='fields simple-route-fields'>
    <div class='twelve wide field'>
      <%= f.label :ident do %>
        <%= t('intro.admin.tour.simple_route') %>
        <i class='intro-admin__question' title="<%= t('intro.admin.tips.simple_route') %>"></i>
      <% end %>
      <%= text_field_tag 'tour[route][simple]', @tour.simple_route, placeholder: t('intro.admin.placeholders.simple_route') %>
    </div>

    <div class='four wide field'>
      <div class='checkbox intro-admin__checkbox'>
        <%= check_box_tag 'tour[route][strict]', 1, @tour.strict_route? %>
        <%= label_tag 'tour[route][strict]', t('intro.admin.placeholders.strict_route'), title: t('intro.admin.tips.strict_route') %>
      </div>
    </div>
  </div>

  <div class='four fields'>
    <div class='field required'>
      <%= f.label :ident, t('intro.admin.tour.ident') %>
      <%= f.text_field :ident, placeholder: t('intro.admin.placeholders.tour_ident'), required: true %>
    </div>

    <div class='field'>
      <%= f.label :controller_path, 'Controller' %>
      <%= f.text_field :controller_path, placeholder: 'Controller path' %>
    </div>

    <div class='field'>
      <%= f.label :action_name, 'Action' %>
      <%= f.text_field :action_name, placeholder: 'Action name' %>
    </div>

    <div class='field'>
      <%= f.label :action_name, t('intro.admin.tour.query_params') %>
      <%= text_field_tag 'tour[route][query]', @tour.route[:query], placeholder: t('intro.admin.placeholders.query_params') %>
    </div>
  </div>

  <%= render 'steps' %>

  <details class='field'>
    <summary><%= t('intro.admin.others') %></summary>
    <div class='intro-admin__tour-others'>
      <div class='field'>
        <div class='checkbox intro-admin__checkbox'>
          <%= check_box_tag 'tour[options][overlay_visible]', 1, @tour.options['overlay_visible'] %>
          <%= label_tag 'tour[options][overlay_visible]', t('intro.admin.placeholders.overlay_visible') %>
        </div>
      </div>

      <div class='field'>
        <div class='checkbox intro-admin__checkbox'>
          <%= check_box_tag 'tour[options][btn_visible]', 1, @tour.options['btn_visible'].nil? || @tour.options['btn_visible'].to_i > 0 %>
          <%= label_tag 'tour[options][btn_visible]', t('intro.admin.placeholders.btn_visible') %>
        </div>
      </div>

      <div class='two fields'>
        <div class='field'>
          <%= label_tag :btn_complete_text, t('intro.admin.tour.btn_complete_text') %>
          <%= text_field_tag 'tour[options][btn_complete_text]', @tour.options['btn_complete_text'], placeholder: t('intro.admin.placeholders.btn_complete_text') %>
        </div>

        <div class='field'>
          <%= label_tag :btn_complete_link, t('intro.admin.tour.btn_complete_link') %>
          <%= text_field_tag 'tour[options][btn_complete_link]', @tour.options['btn_complete_link'], placeholder: t('intro.admin.placeholders.btn_complete_link') %>
        </div>
      </div>

      <div class='three fields'>
        <div class='field'>
          <%= f.label :expired_at, t('intro.admin.tour.expired_time') %>
          <%= f.date_field :expired_at %>
        </div>
      </div>
    </div>
  </details>

  <div class='field intro-admin__tour-actions'>
    <%= button_tag t('intro.admin.submit'), class: 'intro-admin__button prime', type: :submit %>
    <%= button_tag t('intro.admin.test'), class: 'intro-admin__button', type: :button %>
    <%= yield(:form_actions) %>
  </div>
<% end %>